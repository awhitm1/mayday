<h2 mat-dialog-title>User Config:</h2>
<mat-dialog-content>
  <form [formGroup]="userConfigForm" (ngSubmit)="onSubmit()" class="form">
    <div>
      <h4>{{this.user.f_name}} {{this.user.l_name}}</h4>
    </div>
    <div>
      <mat-form-field class="config">
        <mat-label floatLabel="is_tech">Tech</mat-label>
        <mat-select matInput formControlName="is_tech" [(ngModel)]="this.user.is_tech">
          <mat-option value=true>True</mat-option>
          <mat-option value=false>False</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div>
      <mat-form-field class="config">
        <mat-label floatLabel="is_admin">Admin</mat-label>
        <mat-select matInput formControlName="is_admin" [(ngModel)]="this.user.is_admin">
          <mat-option value="true">True</mat-option>
          <mat-option value="false">False</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field class="config">
        <mat-slide-toggle formControlName="active" >Active</mat-slide-toggle>
      </mat-form-field>

      <mat-form-field class="group-list">
        <mat-label floatLabel="groups">Groups</mat-label>
        <mat-chip-grid #chipGrid matInput formControlName="groups" aria-label="Group selection">
          @for (group of data.groups; track group){
            <mat-chip-row (removed)="remove(group.name)">
              {{group}}
              <button matChipRemove [attr.aria-label]="'Remove ' + group">
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip-row>
          }
        </mat-chip-grid>
        <input placeholder="New Group..." #groupInput [formControl]="groupCtrl" [matChipInputFor]="chipGrid" [matAutocomplete]="auto"  [matChipInputSeparatorKeyCodes]="separatorKeysCodes" (matChipInputTokenEnd)="add($event)"/>
        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
          @for (group of filteredGroups | async; track group) {
            <mat-option [value]="group">{{group}}</mat-option>
          }
        </mat-autocomplete>
      </mat-form-field>
    </div>
    <button type="button" (click)="closeDialog()">Cancel</button>
    <button type="submit" [disabled]="!userConfigForm.valid">Submit</button>
  </form>
</mat-dialog-content>
